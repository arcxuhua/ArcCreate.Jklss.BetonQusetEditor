<Window x:Class="ArcCreate.Jklss.BetonQusetEditor.Windows.GrammarModelWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:ArcCreate.Jklss.BetonQusetEditor.Windows"
        mc:Ignorable="d"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:binding="http://schemas.microsoft.com/xaml/behaviors"
        Title="添加\修改一个 语法吧！" Topmost="True" Height="400" Width="800" WindowStyle="None" AllowsTransparency="True" Background="{x:Null}" WindowStartupLocation="CenterScreen">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="30"/>
            <RowDefinition />
        </Grid.RowDefinitions>
        <Grid Background="#FF4C4C4C">
            <TextBlock HorizontalAlignment="Left" VerticalAlignment="Center" Margin="10 0 0 0" FontSize="13" FontWeight="Bold" Foreground="White">添加\修改\删除 一个语法模型,如果您不懂请立即关闭此页面</TextBlock>
            <Button Command="{Binding CloseCommand}" CommandParameter="{Binding .,RelativeSource={RelativeSource AncestorType=Window}}" Grid.Row="0" Margin="0 0 10 1" VerticalAlignment="Center" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniSecondaryDarkButton}" ToolTip="关闭" Width="25" Height="25" Background="White" BorderBrush="White" Foreground="#DDFF0000">
                <materialDesign:PackIcon Kind="Close" Height="20" Width="20" />
            </Button>
        </Grid>
        <Grid Grid.Row="1" Background="#FF757575">
            <Grid.RowDefinitions>
                <RowDefinition Height="50"/>
                <RowDefinition Height="150"/>
                <RowDefinition />
            </Grid.RowDefinitions>
            <Grid>
                <TextBlock VerticalAlignment="Center" HorizontalAlignment="Left" FontSize="12" FontWeight="Bold" Foreground="White" Margin="30 0 0 0">选择模型类型:</TextBlock>
                <ComboBox x:Name="SelectType_Cbox" SelectedIndex="{Binding SelectType}" materialDesign:TextFieldAssist.UnderlineBrush="White" VerticalAlignment="Center" HorizontalAlignment="Left" FontSize="12" Height="25" Width="200" Margin="120 0 0 0">
                    <ComboBoxItem>条件(Condition)模型</ComboBoxItem>
                    <ComboBoxItem>事件(Event)模型</ComboBoxItem>
                    <ComboBoxItem>目标(Objective)模型</ComboBoxItem>
                    <binding:Interaction.Triggers>
                        <binding:EventTrigger EventName="SelectionChanged">
                            <binding:InvokeCommandAction Command="{Binding SelectTypeSelectionChangedCommand}" CommandParameter="{Binding ElementName=SelectType_Cbox}">
                            </binding:InvokeCommandAction>
                        </binding:EventTrigger>
                    </binding:Interaction.Triggers>
                </ComboBox>
                <TextBlock VerticalAlignment="Center" HorizontalAlignment="Left" FontSize="12" FontWeight="Bold" Foreground="White" Margin="400 0 0 0">选择已有模型:</TextBlock>
                <ComboBox x:Name="SelectModel_Cbox" SelectedItem="{Binding ModelSelect,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" ItemsSource="{Binding ModelItems}" materialDesign:TextFieldAssist.UnderlineBrush="White" HorizontalAlignment="Left" FontSize="12" Height="26" Width="129" Margin="490,0,0,0">
                    <binding:Interaction.Triggers>
                        <binding:EventTrigger EventName="SelectionChanged">
                            <binding:InvokeCommandAction Command="{Binding SelectModelSelectionChangedCommand}" CommandParameter="{Binding ElementName=SelectModel_Cbox}">
                            </binding:InvokeCommandAction>
                        </binding:EventTrigger>
                    </binding:Interaction.Triggers>
                </ComboBox>
                <Button Command="{Binding AddGrammarModelToListCommand}" CommandParameter="{Binding ElementName=SelectModel_Cbox}" Width="20" Height="20" Margin="624,0,0,0" VerticalAlignment="Center" HorizontalAlignment="Left" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="添加" BorderBrush="#FF3AB78A" Background="#FF3AB78A">
                    <materialDesign:PackIcon Kind="Plus" VerticalAlignment="Center" />
                </Button>
                <Button Command="{Binding DeleteGrammarModelToListCommand}" CommandParameter="{Binding ElementName=SelectModel_Cbox}" Width="20" Height="20" Margin="658,0,0,0" VerticalAlignment="Center" HorizontalAlignment="Left" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="删除" Background="#FFB73A3A" BorderBrush="#FFB73A3A">
                    <materialDesign:PackIcon Kind="ElectricSwitchClosed" />
                </Button>
                <Button  Command="{Binding SaveGrammarModelCommand}" CommandParameter="{Binding ElementName=SelectModel_Cbox}" Width="107" Height="26" Margin="683,0,0,0" HorizontalAlignment="Left" VerticalAlignment="Center" FontSize="12" Content="保存"/>
            </Grid>

            <Grid Grid.Row="1">
                <ListBox x:Name="Grammer_ListBox" SelectedItem="{Binding GrammerSelect,UpdateSourceTrigger=PropertyChanged}" ItemsSource="{Binding Parameter,NotifyOnSourceUpdated=True,Mode=TwoWay}" d:ItemsSource="{d:SampleData ItemCount=5}">
                    <ListBox.ItemsPanel>
                        <ItemsPanelTemplate>
                            <WrapPanel Margin="0 0 0 0" Orientation="Horizontal" IsItemsHost="True"></WrapPanel>
                        </ItemsPanelTemplate>
                    </ListBox.ItemsPanel>
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <Control x:Name="ctrl" Margin="0 2 0 0" HorizontalAlignment="Left" VerticalAlignment="Center" Height="50"></Control>
                            <DataTemplate.Triggers>
                                <DataTrigger Binding="{Binding Path=Type}" Value="0">
                                    <Setter Property="Template" TargetName="ctrl">
                                        <Setter.Value>
                                            <ControlTemplate>
                                                <Grid>
                                                    <Border Margin="0 0 0 2" HorizontalAlignment="Left" VerticalAlignment="Center" Width="100" Height="30" Background="#FFDE8686">
                                                        <Grid TextBlock.Foreground="White" TextBlock.FontWeight="Bold">
                                                            <Button Command="{Binding Path=SelectItCommand}" Background="#FFDE8686" BorderBrush="#FFDE8686"></Button>
                                                            <TextBlock Margin="5 0 0 0" HorizontalAlignment="Left" VerticalAlignment="Center">主命令</TextBlock>
                                                            <Button Command="{Binding Path=AddControlCommand}" CommandParameter="{Binding ElementName=ctrl}" Width="20" Height="20" Margin="0 0 30 0" VerticalAlignment="Center" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="添加" BorderBrush="#FF3AB78A" Background="#FF3AB78A">
                                                                <materialDesign:PackIcon Kind="Plus" />
                                                            </Button>
                                                            <Button IsEnabled="False" Command="{Binding Path=DeleteControlCommand}" CommandParameter="{Binding ElementName=ctrl}" Width="20" Height="20" Margin="0 0 5 0" VerticalAlignment="Center" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="删除" Background="#FFB73A3A" BorderBrush="#FFB73A3A">
                                                                <materialDesign:PackIcon Kind="ElectricSwitchClosed" />
                                                            </Button>
                                                        </Grid>
                                                        <Border.Effect>
                                                            <DropShadowEffect BlurRadius="13" Direction="315" Opacity="0.8" ShadowDepth="3"></DropShadowEffect>
                                                        </Border.Effect>
                                                    </Border>
                                                    <ListBox SelectedItem="{Binding GrammerSelect}" HorizontalAlignment="Left" VerticalAlignment="Center" Height="50" Margin="110 0 0 0" x:Name="Grammer_ListBox" ItemsSource="{Binding Path=Parameter,NotifyOnSourceUpdated=True,Mode=TwoWay}">
                                                        <ListBox.ItemsPanel>
                                                            <ItemsPanelTemplate>
                                                                <WrapPanel Margin="0 0 0 0" Orientation="Horizontal" IsItemsHost="True"></WrapPanel>
                                                            </ItemsPanelTemplate>
                                                        </ListBox.ItemsPanel>
                                                        <ListBox.ItemTemplate>
                                                            <DataTemplate>
                                                                <Control x:Name="ctrl" Margin="0 0 0 0" HorizontalAlignment="Left" VerticalAlignment="Center" Height="30"></Control>
                                                                <DataTemplate.Triggers>
                                                                    <DataTrigger Binding="{Binding Path=Type}" Value="1">
                                                                        <Setter Property="Template" TargetName="ctrl">
                                                                            <Setter.Value>
                                                                                <ControlTemplate>
                                                                                    <Border Margin="0 2 0 0" HorizontalAlignment="Left" VerticalAlignment="Center" Width="100" Height="30" Background="#FF8DBCBD">
                                                                                        <Grid TextBlock.Foreground="White" TextBlock.FontWeight="Bold">
                                                                                            <Button Command="{Binding Path=SelectItCommand}" Background="#FF8DBCBD" BorderBrush="#FF8DBCBD"></Button>
                                                                                            <TextBlock Margin="5 0 0 0" HorizontalAlignment="Left" VerticalAlignment="Center">主参数</TextBlock>
                                                                                            <Button Command="{Binding Path=AddControlCommand}" CommandParameter="{Binding ElementName=ctrl}" Width="20" Height="20" Margin="0 0 30 0" VerticalAlignment="Center" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="添加" BorderBrush="#FF3AB78A" Background="#FF3AB78A">
                                                                                                <materialDesign:PackIcon Kind="Plus" />
                                                                                            </Button>
                                                                                            <Button IsEnabled="False" Command="{Binding Path=DeleteControlCommand}" CommandParameter="{Binding ElementName=ctrl}" Width="20" Height="20" Margin="0 0 5 0" VerticalAlignment="Center" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="删除" Background="#FFB73A3A" BorderBrush="#FFB73A3A">
                                                                                                <materialDesign:PackIcon Kind="ElectricSwitchClosed" />
                                                                                            </Button>
                                                                                        </Grid>
                                                                                        <Border.Effect>
                                                                                            <DropShadowEffect BlurRadius="13" Direction="315" Opacity="0.8" ShadowDepth="3"></DropShadowEffect>
                                                                                        </Border.Effect>
                                                                                    </Border>
                                                                                </ControlTemplate>
                                                                            </Setter.Value>
                                                                        </Setter>
                                                                    </DataTrigger>
                                                                    <DataTrigger Binding="{Binding Path=Type}" Value="2">
                                                                        <Setter Property="Template" TargetName="ctrl">
                                                                            <Setter.Value>
                                                                                <ControlTemplate>
                                                                                    <Border Margin="0 2 0 0" HorizontalAlignment="Left" VerticalAlignment="Center" Width="100" Height="30" Background="#FFA08DBD">
                                                                                        <Grid TextBlock.Foreground="White" TextBlock.FontWeight="Bold">
                                                                                            <Button Command="{Binding Path=SelectItCommand}" Background="#FFA08DBD" BorderBrush="#FFA08DBD"></Button>
                                                                                            <TextBlock Margin="10 0 0 0" HorizontalAlignment="Left" VerticalAlignment="Center">参数</TextBlock>
                                                                                            <Button Command="{Binding Path=AddControlCommand}" CommandParameter="{Binding ElementName=ctrl}" Width="20" Height="20" Margin="0 0 30 0" VerticalAlignment="Center" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="添加" BorderBrush="#FF3AB78A" Background="#FF3AB78A">
                                                                                                <materialDesign:PackIcon Kind="Plus" />
                                                                                            </Button>
                                                                                            <Button Command="{Binding Path=DeleteControlCommand}" CommandParameter="{Binding ElementName=ctrl}" Width="20" Height="20" Margin="0 0 5 0" VerticalAlignment="Center" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="删除" Background="#FFB73A3A" BorderBrush="#FFB73A3A">
                                                                                                <materialDesign:PackIcon Kind="ElectricSwitchClosed" />
                                                                                            </Button>
                                                                                        </Grid>
                                                                                        <Border.Effect>
                                                                                            <DropShadowEffect BlurRadius="13" Direction="315" Opacity="0.8" ShadowDepth="3"></DropShadowEffect>
                                                                                        </Border.Effect>
                                                                                    </Border>
                                                                                </ControlTemplate>
                                                                            </Setter.Value>
                                                                        </Setter>
                                                                    </DataTrigger>
                                                                </DataTemplate.Triggers>
                                                            </DataTemplate>
                                                        </ListBox.ItemTemplate>
                                                    </ListBox>
                                                </Grid>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </DataTrigger>

                                <DataTrigger Binding="{Binding Path=Type}" Value="3">
                                    <Setter Property="Template" TargetName="ctrl">
                                        <Setter.Value>
                                            <ControlTemplate>
                                                <Grid>
                                                    <Border Margin="0 0 0 2" HorizontalAlignment="Left" VerticalAlignment="Center" Width="100" Height="30"  Background="#FF8EBD8D">
                                                        <Grid TextBlock.Foreground="White" TextBlock.FontWeight="Bold">
                                                            <Button Command="{Binding Path=SelectItCommand}" Background="#FF8EBD8D" BorderBrush="#FF8EBD8D"></Button>
                                                            <TextBlock Margin="5 0 0 0" HorizontalAlignment="Left" VerticalAlignment="Center">子命令</TextBlock>
                                                            <Button Command="{Binding Path=AddControlCommand}" CommandParameter="{Binding ElementName=ctrl}" Width="20" Height="20" Margin="0 0 30 0" VerticalAlignment="Center" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="添加" BorderBrush="#FF3AB78A" Background="#FF3AB78A">
                                                                <materialDesign:PackIcon Kind="Plus" />
                                                            </Button>
                                                            <Button Command="{Binding Path=DeleteControlCommand}" CommandParameter="{Binding ElementName=ctrl}" Width="20" Height="20" Margin="0 0 5 0" VerticalAlignment="Center" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="删除" Background="#FFB73A3A" BorderBrush="#FFB73A3A">
                                                                <materialDesign:PackIcon Kind="ElectricSwitchClosed" />
                                                            </Button>
                                                        </Grid>
                                                        <Border.Effect>
                                                            <DropShadowEffect BlurRadius="13" Direction="315" Opacity="0.8" ShadowDepth="3"></DropShadowEffect>
                                                        </Border.Effect>
                                                    </Border>
                                                    <ListBox SelectedItem="{Binding GrammerSelect}" HorizontalAlignment="Left" VerticalAlignment="Center" Height="50" Margin="110 0 0 0" x:Name="Grammer_ListBox" ItemsSource="{Binding Path=Parameter,NotifyOnSourceUpdated=True,Mode=TwoWay}">
                                                        <ListBox.ItemsPanel>
                                                            <ItemsPanelTemplate>
                                                                <WrapPanel Margin="0 0 0 0" Orientation="Horizontal" IsItemsHost="True"></WrapPanel>
                                                            </ItemsPanelTemplate>
                                                        </ListBox.ItemsPanel>
                                                        <ListBox.ItemTemplate>
                                                            <DataTemplate>
                                                                <Control x:Name="ctrl" Margin="0 2 0 0" HorizontalAlignment="Left" VerticalAlignment="Center" Height="30"></Control>
                                                                <DataTemplate.Triggers>
                                                                    <DataTrigger Binding="{Binding Path=Type}" Value="1">
                                                                        <Setter Property="Template" TargetName="ctrl">
                                                                            <Setter.Value>
                                                                                <ControlTemplate>
                                                                                    <Border Margin="0 2 0 0" HorizontalAlignment="Left" VerticalAlignment="Center" Width="100" Height="30" Background="#FF8DBCBD">
                                                                                        <Grid TextBlock.Foreground="White" TextBlock.FontWeight="Bold">
                                                                                            <Button Command="{Binding Path=SelectItCommand}" Background="#FF8DBCBD" BorderBrush="#FF8DBCBD"></Button>
                                                                                            <TextBlock Margin="5 0 0 0" HorizontalAlignment="Left" VerticalAlignment="Center">主参数</TextBlock>
                                                                                            <Button Command="{Binding Path=AddControlCommand}" CommandParameter="{Binding ElementName=ctrl}" Width="20" Height="20" Margin="0 0 30 0" VerticalAlignment="Center" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="添加" BorderBrush="#FF3AB78A" Background="#FF3AB78A">
                                                                                                <materialDesign:PackIcon Kind="Plus" />
                                                                                            </Button>
                                                                                            <Button IsEnabled="False" Command="{Binding Path=DeleteControlCommand}" CommandParameter="{Binding ElementName=ctrl}" Width="20" Height="20" Margin="0 0 5 0" VerticalAlignment="Center" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="删除" Background="#FFB73A3A" BorderBrush="#FFB73A3A">
                                                                                                <materialDesign:PackIcon Kind="ElectricSwitchClosed" />
                                                                                            </Button>
                                                                                        </Grid>
                                                                                        <Border.Effect>
                                                                                            <DropShadowEffect BlurRadius="13" Direction="315" Opacity="0.8" ShadowDepth="3"></DropShadowEffect>
                                                                                        </Border.Effect>
                                                                                    </Border>
                                                                                </ControlTemplate>
                                                                            </Setter.Value>
                                                                        </Setter>
                                                                    </DataTrigger>
                                                                    <DataTrigger Binding="{Binding Type}" Value="2">
                                                                        <Setter Property="Template" TargetName="ctrl">
                                                                            <Setter.Value>
                                                                                <ControlTemplate>
                                                                                    <Border Margin="0 2 0 0" HorizontalAlignment="Left" VerticalAlignment="Center" Width="100" Height="30" Background="#FFA08DBD">
                                                                                        <Grid TextBlock.Foreground="White" TextBlock.FontWeight="Bold">
                                                                                            <Button Command="{Binding Path=SelectItCommand}" Background="#FFA08DBD" BorderBrush="#FFA08DBD"></Button>
                                                                                            <TextBlock Margin="10 0 0 0" HorizontalAlignment="Left" VerticalAlignment="Center">参数</TextBlock>
                                                                                            <Button Command="{Binding Path=AddControlCommand}" CommandParameter="{Binding ElementName=ctrl}" Width="20" Height="20" Margin="0 0 30 0" VerticalAlignment="Center" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="添加" BorderBrush="#FF3AB78A" Background="#FF3AB78A">
                                                                                                <materialDesign:PackIcon Kind="Plus" />
                                                                                            </Button>
                                                                                            <Button Command="{Binding Path=DeleteControlCommand}" CommandParameter="{Binding ElementName=ctrl}" Width="20" Height="20" Margin="0 0 5 0" VerticalAlignment="Center" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="删除" Background="#FFB73A3A" BorderBrush="#FFB73A3A">
                                                                                                <materialDesign:PackIcon Kind="ElectricSwitchClosed" />
                                                                                            </Button>
                                                                                        </Grid>
                                                                                        <Border.Effect>
                                                                                            <DropShadowEffect BlurRadius="13" Direction="315" Opacity="0.8" ShadowDepth="3"></DropShadowEffect>
                                                                                        </Border.Effect>
                                                                                    </Border>
                                                                                </ControlTemplate>
                                                                            </Setter.Value>
                                                                        </Setter>
                                                                    </DataTrigger>
                                                                </DataTemplate.Triggers>
                                                            </DataTemplate>
                                                        </ListBox.ItemTemplate>
                                                    </ListBox>
                                                </Grid>

                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </DataTrigger>
                            </DataTemplate.Triggers>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </Grid>

            <Grid Grid.Row="2">
                <ItemsControl x:Name="items" ItemsSource="{Binding Editer}">
                    <ItemsControl.Template>
                        <ControlTemplate>
                            <Control x:Name="items"></Control>
                            <ControlTemplate.Triggers>
                                <DataTrigger Binding="{Binding Editer.Type}" Value="Contidons_MainClass">
                                    <Setter Property="Control.Template" TargetName="items">
                                        <Setter.Value>
                                            <ControlTemplate>
                                                <Grid x:Name="MainClass" TextBlock.FontSize="14" TextBlock.FontWeight="Bold" TextBlock.Foreground="White">

                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="10,10,0,0">命令名称:</TextBlock>
                                                    <TextBox Text="{Binding Editer.CmdName}" Height="22" FontSize="12" Width="200" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="90,10,0,0"></TextBox>
                                                    <CheckBox IsChecked="{Binding Editer.IsUseCondition}" Style="{StaticResource MaterialDesignFilterChipOutlineCheckBox}" Height="25" Margin="295,8,0,137" Content="是否为条件性参数"/>
                                                    <Button Command="{Binding Editer.SaveThisCommand}" CommandParameter="{Binding ElementName=MainClass}" Width="60" Height="25" Margin="0 5 11 0" HorizontalAlignment="Right" VerticalAlignment="Top" FontSize="12">保存</Button>
                                                    <DataGrid x:Name="data" ItemsSource="{Binding Editer.HelpInfoMessages,Mode=TwoWay}" SelectionMode="Extended" CanUserAddRows="False" AutoGenerateColumns="False" HeadersVisibility="All" Margin="10,35,10,35">
                                                        <DataGrid.Columns>
                                                            <DataGridTextColumn Header="内容" Binding="{Binding HelpInfo,Mode=TwoWay}"  ElementStyle="{StaticResource MaterialDesignDataGridTextColumnStyle}" EditingElementStyle="{StaticResource MaterialDesignDataGridTextColumnEditingStyle}" CanUserResize="False"></DataGridTextColumn>
                                                        </DataGrid.Columns>
                                                    </DataGrid>
                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="10,145,0,0">命令帮助:</TextBlock>
                                                    <TextBox Text="{Binding Editer.HelpInfoMessage}" Height="22" FontSize="12" Width="645" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="90,145,0,0"></TextBox>
                                                    <Button Command="{Binding Editer.AddHelpInfoMessageCommand}" CommandParameter="{Binding ElementName=data}" Width="20" Height="20" Margin="0,145,35,0" VerticalAlignment="Top" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="添加" BorderBrush="#FF3AB78A" Background="#FF3AB78A">
                                                        <materialDesign:PackIcon Kind="Plus" />
                                                    </Button>
                                                    <Button Command="{Binding Editer.DeleteHelpInfoMessageCommand}" CommandParameter="{Binding ElementName=data}" Width="20" Height="20" Margin="0,145,10,0" VerticalAlignment="Top" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="删除" Background="#FFB73A3A" BorderBrush="#FFB73A3A">
                                                        <materialDesign:PackIcon Kind="ElectricSwitchClosed" />
                                                    </Button>
                                                </Grid>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </DataTrigger>

                                <DataTrigger Binding="{Binding Editer.Type}" Value="Contidons_ParameterFirst">
                                    <Setter Property="Control.Template" TargetName="items">
                                        <Setter.Value>
                                            <ControlTemplate>
                                                <Grid x:Name="ParameterFirst" TextBlock.FontSize="14" TextBlock.FontWeight="Bold" TextBlock.Foreground="White">

                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="10,10,0,0">参数分割符:</TextBlock>
                                                    <TextBox Text="{Binding Editer.ParameterSpiltChar}" Height="22" FontSize="12" Width="85" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="90,10,0,0"></TextBox>
                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="180,10,0,0">参数步长:</TextBlock>
                                                    <TextBox x:Name="ParameterSpiltStep_TBox" Text="{Binding Editer.ParameterSpiltStep,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Height="22" FontSize="12" Width="135" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="245,10,0,0">
                                                        <binding:Interaction.Triggers>
                                                            <binding:EventTrigger EventName="TextChanged">
                                                                <binding:InvokeCommandAction Command="{Binding Editer.ParameterSpiltStepChangedCommand}" CommandParameter="{Binding ElementName=ParameterSpiltStep_TBox}">
                                                                </binding:InvokeCommandAction>
                                                            </binding:EventTrigger>
                                                        </binding:Interaction.Triggers>
                                                    </TextBox>
                                                    <Button Command="{Binding Editer.SaveThisCommand}" CommandParameter="{Binding ElementName=ParameterFirst}" Width="60" Height="25" Margin="0 5 11 0" HorizontalAlignment="Right" VerticalAlignment="Top" FontSize="12">保存</Button>
                                                    <DataGrid x:Name="help_data" ItemsSource="{Binding Editer.ParameterHelpInfoMessages,Mode=TwoWay}" SelectionMode="Extended" CanUserAddRows="False" AutoGenerateColumns="False" HeadersVisibility="All" Margin="10,35,420,35">
                                                        <DataGrid.Columns>
                                                            <DataGridTextColumn Binding="{Binding ParameterHelpInfo,Mode=TwoWay}" Header="内容" ElementStyle="{StaticResource MaterialDesignDataGridTextColumnStyle}" EditingElementStyle="{StaticResource MaterialDesignDataGridTextColumnEditingStyle}" CanUserResize="False"></DataGridTextColumn>
                                                        </DataGrid.Columns>
                                                    </DataGrid>
                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="10,145,0,0">参数帮助:</TextBlock>
                                                    <TextBox Text="{Binding Editer.ParameterHelpInfoMessage}" Height="22" FontSize="12" Width="216" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="90,145,0,0"></TextBox>
                                                    <Button Command="{Binding Editer.AddParameterHelpInfoMessageCommand}" CommandParameter="{Binding ElementName=help_data}" Width="20" Height="20" Margin="0,145,459,0" VerticalAlignment="Top" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="添加" BorderBrush="#FF3AB78A" Background="#FF3AB78A">
                                                        <materialDesign:PackIcon Kind="Plus" />
                                                    </Button>
                                                    <Button Command="{Binding Editer.DeleteParameterHelpInfoMessageCommand}" CommandParameter="{Binding ElementName=help_data}" Width="20" Height="20" Margin="0,145,420,0" VerticalAlignment="Top" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="删除" Background="#FFB73A3A" BorderBrush="#FFB73A3A">
                                                        <materialDesign:PackIcon Kind="ElectricSwitchClosed" />
                                                    </Button>
                                                    <DataGrid x:Name="napeHelpInfoMessages" ItemsSource="{Binding Editer.NapeHelpInfoMessages,Mode=TwoWay}" SelectionMode="Extended" CanUserAddRows="False" AutoGenerateColumns="False" HeadersVisibility="All" Margin="400,35,10,35">
                                                        <DataGrid.Columns>
                                                            <DataGridTextColumn Binding="{Binding NapeHelpInfoMessageNum,Mode=TwoWay}" Header="项" ElementStyle="{StaticResource MaterialDesignDataGridTextColumnStyle}" EditingElementStyle="{StaticResource MaterialDesignDataGridTextColumnEditingStyle}" CanUserResize="False"/>
                                                            <DataGridTextColumn Binding="{Binding NapeHelpInfoMessage,Mode=TwoWay}" Header="内容" ElementStyle="{StaticResource MaterialDesignDataGridTextColumnStyle}" EditingElementStyle="{StaticResource MaterialDesignDataGridTextColumnEditingStyle}" CanUserResize="False"/>
                                                        </DataGrid.Columns>
                                                    </DataGrid>
                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="400,145,0,0"><Run Text="项的帮助:"/></TextBlock>

                                                    <TextBox Text="{Binding Editer.NapeHelpInfoMessage}" Height="22" FontSize="12" Width="175" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="465,145,0,0"/>
                                                    <Button Command="{Binding Editer.AddNapeHelpInfoMessageCommand}" CommandParameter="{Binding ElementName=napeHelpInfoMessages}" Width="20" Height="20" Margin="0,145,50,0" VerticalAlignment="Top" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="添加" BorderBrush="#FF3AB78A" Background="#FF3AB78A">
                                                        <materialDesign:PackIcon Kind="Plus" />
                                                    </Button>
                                                    <Button  Command="{Binding Editer.DeleteNapeHelpInfoMessageCommand}" CommandParameter="{Binding ElementName=napeHelpInfoMessages}" Width="20" Height="20" Margin="0,145,10,0" VerticalAlignment="Top" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="删除" Background="#FFB73A3A" BorderBrush="#FFB73A3A">
                                                        <materialDesign:PackIcon Kind="ElectricSwitchClosed" />
                                                    </Button>
                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="645,145,0,0"><Run Text="项:"/></TextBlock>
                                                    <ComboBox ItemsSource="{Binding Editer.NapeNums}" SelectedItem="{Binding Editer.NapeSelectNum}" Margin="668,145,77,0" VerticalAlignment="Top" Height="22" FontSize="12" ></ComboBox>
                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="400,10,0,0"><Run Text="卡片需求类型:"/></TextBlock>
                                                    <ComboBox SelectedIndex="{Binding Editer.NeedCardSelectIndex}" Margin="493,10,160,0" VerticalAlignment="Top" Height="22" FontSize="12" >
                                                        <ComboBoxItem>对话主体</ComboBoxItem>
                                                        <ComboBoxItem>玩家对话</ComboBoxItem>
                                                        <ComboBoxItem>NPC对话</ComboBoxItem>
                                                        <ComboBoxItem>条件</ComboBoxItem>
                                                        <ComboBoxItem>事件</ComboBoxItem>
                                                        <ComboBoxItem>目标</ComboBoxItem>
                                                        <ComboBoxItem>任务笔记</ComboBoxItem>
                                                        <ComboBoxItem>物品</ComboBoxItem>
                                                    </ComboBox>
                                                </Grid>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </DataTrigger>

                                <DataTrigger Binding="{Binding Editer.Type}" Value="Contidons_ChirldClass">
                                    <Setter Property="Control.Template" TargetName="items">
                                        <Setter.Value>
                                            <ControlTemplate>
                                                <Grid x:Name="ChirldClass" TextBlock.FontSize="14" TextBlock.FontWeight="Bold" TextBlock.Foreground="White">

                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="10,10,0,0">命令名称:</TextBlock>
                                                    <TextBox Text="{Binding Editer.ChirdCmdName}" Height="22" FontSize="12" Width="634" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="90,10,0,0"></TextBox>

                                                    <Button Command="{Binding Editer.SaveThisCommand}" CommandParameter="{Binding ElementName=ChirldClass}" Width="60" Height="25" Margin="0 5 11 0" HorizontalAlignment="Right" VerticalAlignment="Top" FontSize="12">保存</Button>
                                                    <DataGrid x:Name="data" ItemsSource="{Binding Editer.ChirdCmdHelpInfoMessages,Mode=TwoWay}" SelectionMode="Extended" CanUserAddRows="False" AutoGenerateColumns="False" HeadersVisibility="All" Margin="10,35,10,35">
                                                        <DataGrid.Columns>
                                                            <DataGridTextColumn Binding="{Binding ChirdCmdHelpInfo,Mode=TwoWay}" Header="内容" ElementStyle="{StaticResource MaterialDesignDataGridTextColumnStyle}" EditingElementStyle="{StaticResource MaterialDesignDataGridTextColumnEditingStyle}" CanUserResize="False"></DataGridTextColumn>
                                                        </DataGrid.Columns>
                                                    </DataGrid>
                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="10,145,0,0">命令帮助:</TextBlock>
                                                    <TextBox Text="{Binding Editer.ChirdCmdHelpInfoMessage}" Height="22" FontSize="12" Width="645" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="90,145,0,0"></TextBox>
                                                    <Button Command="{Binding Editer.AddChirdCmdHelpInfoMessageCommand}" CommandParameter="{Binding ElementName=data}" Width="20" Height="20" Margin="0,145,35,0" VerticalAlignment="Top" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="添加" BorderBrush="#FF3AB78A" Background="#FF3AB78A">
                                                        <materialDesign:PackIcon Kind="Plus" />
                                                    </Button>
                                                    <Button Command="{Binding Editer.DeleteChirdCmdHelpInfoMessageCommand}" CommandParameter="{Binding ElementName=data}" Width="20" Height="20" Margin="0,145,10,0" VerticalAlignment="Top" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="删除" Background="#FFB73A3A" BorderBrush="#FFB73A3A">
                                                        <materialDesign:PackIcon Kind="ElectricSwitchClosed" />
                                                    </Button>
                                                </Grid>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </DataTrigger>

                                <DataTrigger Binding="{Binding Editer.Type}" Value="Events_MainClass">
                                    <Setter Property="Control.Template" TargetName="items">
                                        <Setter.Value>
                                            <ControlTemplate>
                                                <Grid x:Name="MainClass" TextBlock.FontSize="14" TextBlock.FontWeight="Bold" TextBlock.Foreground="White">

                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="10,10,0,0">命令名称:</TextBlock>
                                                    <TextBox Text="{Binding Editer.CmdName}" Height="22" FontSize="12" Width="634" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="90,10,0,0"></TextBox>
                                                    <Button Command="{Binding Editer.SaveThisCommand}" CommandParameter="{Binding ElementName=MainClass}" Width="60" Height="25" Margin="0 5 11 0" HorizontalAlignment="Right" VerticalAlignment="Top" FontSize="12">保存</Button>
                                                    <DataGrid x:Name="data" ItemsSource="{Binding Editer.HelpInfoMessages,Mode=TwoWay}" SelectionMode="Extended" CanUserAddRows="False" AutoGenerateColumns="False" HeadersVisibility="All" Margin="10,35,10,35">
                                                        <DataGrid.Columns>
                                                            <DataGridTextColumn Header="内容" Binding="{Binding HelpInfo,Mode=TwoWay}" ElementStyle="{StaticResource MaterialDesignDataGridTextColumnStyle}" EditingElementStyle="{StaticResource MaterialDesignDataGridTextColumnEditingStyle}" CanUserResize="False"></DataGridTextColumn>
                                                        </DataGrid.Columns>
                                                    </DataGrid>
                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="10,145,0,0">命令帮助:</TextBlock>
                                                    <TextBox Text="{Binding Editer.HelpInfoMessage}" Height="22" FontSize="12" Width="645" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="90,145,0,0"></TextBox>
                                                    <Button Command="{Binding Editer.AddHelpInfoMessageCommand}" CommandParameter="{Binding ElementName=data}" Width="20" Height="20" Margin="0,145,35,0" VerticalAlignment="Top" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="添加" BorderBrush="#FF3AB78A" Background="#FF3AB78A">
                                                        <materialDesign:PackIcon Kind="Plus" />
                                                    </Button>
                                                    <Button Command="{Binding Editer.DeleteHelpInfoMessageCommand}" CommandParameter="{Binding ElementName=data}" Width="20" Height="20" Margin="0,145,10,0" VerticalAlignment="Top" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="删除" Background="#FFB73A3A" BorderBrush="#FFB73A3A">
                                                        <materialDesign:PackIcon Kind="ElectricSwitchClosed" />
                                                    </Button>
                                                </Grid>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </DataTrigger>

                                <DataTrigger Binding="{Binding Editer.Type}" Value="Events_ParameterFirst">
                                    <Setter Property="Control.Template" TargetName="items">
                                        <Setter.Value>
                                            <ControlTemplate>
                                                <Grid x:Name="ParameterFirst" TextBlock.FontSize="14" TextBlock.FontWeight="Bold" TextBlock.Foreground="White">
                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="10,10,0,0">参数分割符:</TextBlock>
                                                    <TextBox Text="{Binding Editer.ParameterSpiltChar}" Height="22" FontSize="12" Width="30" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="90,10,0,0"></TextBox>
                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="125,10,0,0">参数步长:</TextBlock>
                                                    <CheckBox IsChecked="{Binding Editer.ParameterOnlyOne}" Style="{StaticResource MaterialDesignFilterChipOutlineCheckBox}" Height="25" Margin="225,5,0,140" Content="参数单项"/>
                                                    <TextBox x:Name="ParameterSpiltStep_TBox"  Text="{Binding Editer.ParameterSpiltNum,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Height="22" FontSize="12" Width="30" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="190,10,0,0">
                                                        <binding:Interaction.Triggers>
                                                            <binding:EventTrigger EventName="TextChanged">
                                                                <binding:InvokeCommandAction Command="{Binding Editer.ParameterSpiltStepChangedCommand}" CommandParameter="{Binding ElementName=ParameterSpiltStep_TBox}">
                                                                </binding:InvokeCommandAction>
                                                            </binding:EventTrigger>
                                                        </binding:Interaction.Triggers>
                                                    </TextBox>
                                                    <Button Command="{Binding Editer.SaveThisCommand}" Width="60" Height="25" Margin="0 5 11 0" HorizontalAlignment="Right" VerticalAlignment="Top" FontSize="12">保存</Button>
                                                    <DataGrid x:Name="helpdata" ItemsSource="{Binding Editer.ParameterHelpInfoMessages,Mode=TwoWay}" SelectionMode="Extended" CanUserAddRows="False" AutoGenerateColumns="False" HeadersVisibility="All" Margin="10,35,420,35">
                                                        <DataGrid.Columns>
                                                            <DataGridTextColumn Binding="{Binding ParameterHelpInfo,Mode=TwoWay}" Header="内容" ElementStyle="{StaticResource MaterialDesignDataGridTextColumnStyle}" EditingElementStyle="{StaticResource MaterialDesignDataGridTextColumnEditingStyle}" CanUserResize="False"></DataGridTextColumn>
                                                        </DataGrid.Columns>
                                                    </DataGrid>
                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="10,145,0,0">参数帮助:</TextBlock>
                                                    <TextBox Text="{Binding Editer.ParameterHelpInfoMessage}" Height="22" FontSize="12" Width="216" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="90,145,0,0"></TextBox>
                                                    <Button Command="{Binding Editer.AddParameterHelpInfoCommand}" CommandParameter="{Binding ElementName=helpdata}" Width="20" Height="20" Margin="0,145,459,0" VerticalAlignment="Top" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="添加" BorderBrush="#FF3AB78A" Background="#FF3AB78A">
                                                        <materialDesign:PackIcon Kind="Plus" />
                                                    </Button>
                                                    <Button Command="{Binding Editer.DeleteParameterHelpInfoCommand}" CommandParameter="{Binding ElementName=helpdata}" Width="20" Height="20" Margin="0,145,420,0" VerticalAlignment="Top" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="删除" Background="#FFB73A3A" BorderBrush="#FFB73A3A">
                                                        <materialDesign:PackIcon Kind="ElectricSwitchClosed" />
                                                    </Button>
                                                    <DataGrid x:Name="napedata" ItemsSource="{Binding Editer.NapeHelpInfoMessages,Mode=TwoWay}" SelectionMode="Extended" CanUserAddRows="False" AutoGenerateColumns="False" HeadersVisibility="All" Margin="400,35,10,35">
                                                        <DataGrid.Columns>
                                                            <DataGridTextColumn Binding="{Binding NapeHelpInfoMessageNum,Mode=TwoWay}" Header="项" ElementStyle="{StaticResource MaterialDesignDataGridTextColumnStyle}" EditingElementStyle="{StaticResource MaterialDesignDataGridTextColumnEditingStyle}" CanUserResize="False"/>
                                                            <DataGridTextColumn Binding="{Binding NapeHelpInfoMessageSave,Mode=TwoWay}" Header="内容" ElementStyle="{StaticResource MaterialDesignDataGridTextColumnStyle}" EditingElementStyle="{StaticResource MaterialDesignDataGridTextColumnEditingStyle}" CanUserResize="False"/>
                                                        </DataGrid.Columns>
                                                    </DataGrid>
                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="400,145,0,0"><Run Text="项的帮助:"/></TextBlock>

                                                    <TextBox Text="{Binding Editer.NapeHelpInfoMessage}" Height="22" FontSize="12" Width="175" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="465,145,0,0"/>
                                                    <Button Command="{Binding Editer.AddNapeHelpInfoMessageCommand}" CommandParameter="{Binding ElementName=napedata}" Width="20" Height="20" Margin="0,145,50,0" VerticalAlignment="Top" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="添加" BorderBrush="#FF3AB78A" Background="#FF3AB78A">
                                                        <materialDesign:PackIcon Kind="Plus" />
                                                    </Button>
                                                    <Button Command="{Binding Editer.DeleteNapeHelpInfoMessageCommand}" CommandParameter="{Binding ElementName=napedata}" Width="20" Height="20" Margin="0,145,10,0" VerticalAlignment="Top" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="删除" Background="#FFB73A3A" BorderBrush="#FFB73A3A">
                                                        <materialDesign:PackIcon Kind="ElectricSwitchClosed" />
                                                    </Button>
                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="645,145,0,0"><Run Text="项:"/></TextBlock>
                                                    <ComboBox ItemsSource="{Binding Editer.NapeNums}" SelectedItem="{Binding Editer.NapeNumsSelectItem}" Margin="668,145,77,0" VerticalAlignment="Top" Height="22" FontSize="12" ></ComboBox>
                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="312,8,0,0"><Run Text="卡片需求类型:"/></TextBlock>
                                                    <ComboBox SelectedIndex="{Binding Editer.NapeNumsSelectNow}" Margin="400,8,340,0" VerticalAlignment="Top" Height="22" FontSize="12" >
                                                        <ComboBoxItem>对话主体</ComboBoxItem>
                                                        <ComboBoxItem>玩家对话</ComboBoxItem>
                                                        <ComboBoxItem>NPC对话</ComboBoxItem>
                                                        <ComboBoxItem>条件</ComboBoxItem>
                                                        <ComboBoxItem>事件</ComboBoxItem>
                                                        <ComboBoxItem>目标</ComboBoxItem>
                                                        <ComboBoxItem>任务笔记</ComboBoxItem>
                                                        <ComboBoxItem>物品</ComboBoxItem>
                                                    </ComboBox>
                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="464,8,0,0"><Run Text="固有形式:"/></TextBlock>
                                                    <ComboBox x:Name="parameternapeNeedType" ItemsSource="{Binding Editer.ParameterNapeNeedTypes}" SelectedItem="{Binding Editer.ParameterNapeNeedTypeSelectItem}" Margin="529,8,211,0" VerticalAlignment="Top" Height="22" FontSize="12" />
                                                    <Button Command="{Binding Editer.AddParameterNapeNeedTypeCommand}" CommandParameter="{Binding ElementName=parameternapeNeedType}" Width="20" Height="20" Margin="0,8,74,0" VerticalAlignment="Top" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="添加" BorderBrush="#FF3AB78A" Background="#FF3AB78A">
                                                        <materialDesign:PackIcon Kind="Plus" />
                                                    </Button>
                                                    <Button Command="{Binding Editer.DeleteParameterNapeNeedTypeCommand}" CommandParameter="{Binding ElementName=parameternapeNeedType}" Width="20" Height="20" Margin="0,10,185,0" VerticalAlignment="Top" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="删除" Background="#FFB73A3A" BorderBrush="#FFB73A3A">
                                                        <materialDesign:PackIcon Kind="ElectricSwitchClosed" />
                                                    </Button>
                                                    <TextBox Text="{Binding Editer.ParameterNapeNeedType}" Height="22" FontSize="12" Width="83" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="621,9,0,0"/>
                                                </Grid>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </DataTrigger>

                                <DataTrigger Binding="{Binding Editer.Type}" Value="Events_Parameter">
                                    <Setter Property="Control.Template" TargetName="items">
                                        <Setter.Value>
                                            <ControlTemplate>
                                                <Grid x:Name="Parameter" TextBlock.FontSize="14" TextBlock.FontWeight="Bold" TextBlock.Foreground="White">

                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="10,10,0,0">参数分割符:</TextBlock>
                                                    <TextBox Text="{Binding Editer.ParameterSpiltChar}" Height="22" FontSize="12" Width="85" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="90,10,0,0"></TextBox>
                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="180,10,0,0">参数步长:</TextBlock>
                                                    <TextBox x:Name="ParameterSpiltStep_TBox"  Text="{Binding Editer.ParameterSpiltStep,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Height="22" FontSize="12" Width="135" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="245,10,0,0">
                                                        <binding:Interaction.Triggers>
                                                            <binding:EventTrigger EventName="TextChanged">
                                                                <binding:InvokeCommandAction Command="{Binding Editer.ParameterSpiltStepChangedCommand}" CommandParameter="{Binding ElementName=ParameterSpiltStep_TBox}">
                                                                </binding:InvokeCommandAction>
                                                            </binding:EventTrigger>
                                                        </binding:Interaction.Triggers>
                                                    </TextBox>
                                                    <Button Command="{Binding Editer.SaveThisCommand}" CommandParameter="{Binding ElementName=Parameter}" Width="60" Height="25" Margin="0 5 11 0" HorizontalAlignment="Right" VerticalAlignment="Top" FontSize="12">保存</Button>
                                                    <DataGrid x:Name="help_data" ItemsSource="{Binding Editer.ParameterHelpInfoMessages,Mode=TwoWay}" SelectionMode="Extended" CanUserAddRows="False" AutoGenerateColumns="False" HeadersVisibility="All" Margin="10,35,420,35">
                                                        <DataGrid.Columns>
                                                            <DataGridTextColumn Binding="{Binding ParameterHelpInfo,Mode=TwoWay}" Header="内容" ElementStyle="{StaticResource MaterialDesignDataGridTextColumnStyle}" EditingElementStyle="{StaticResource MaterialDesignDataGridTextColumnEditingStyle}" CanUserResize="False"></DataGridTextColumn>
                                                        </DataGrid.Columns>
                                                    </DataGrid>
                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="10,145,0,0">参数帮助:</TextBlock>
                                                    <TextBox Text="{Binding Editer.ParameterHelpInfoMessage}" Height="22" FontSize="12" Width="216" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="90,145,0,0"></TextBox>
                                                    <Button Command="{Binding Editer.AddParameterHelpInfoMessageCommand}" CommandParameter="{Binding ElementName=help_data}" Width="20" Height="20" Margin="0,145,459,0" VerticalAlignment="Top" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="添加" BorderBrush="#FF3AB78A" Background="#FF3AB78A">
                                                        <materialDesign:PackIcon Kind="Plus" />
                                                    </Button>
                                                    <Button Command="{Binding Editer.DeleteParameterHelpInfoMessageCommand}" CommandParameter="{Binding ElementName=help_data}" Width="20" Height="20" Margin="0,145,420,0" VerticalAlignment="Top" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="删除" Background="#FFB73A3A" BorderBrush="#FFB73A3A">
                                                        <materialDesign:PackIcon Kind="ElectricSwitchClosed" />
                                                    </Button>
                                                    <DataGrid x:Name="napeHelpInfoMessages" ItemsSource="{Binding Editer.NapeHelpInfoMessages,Mode=TwoWay}" SelectionMode="Extended" CanUserAddRows="False" AutoGenerateColumns="False" HeadersVisibility="All" Margin="400,35,10,35">
                                                        <DataGrid.Columns>
                                                            <DataGridTextColumn Binding="{Binding NapeHelpInfoMessageNum,Mode=TwoWay}" Header="项" ElementStyle="{StaticResource MaterialDesignDataGridTextColumnStyle}" EditingElementStyle="{StaticResource MaterialDesignDataGridTextColumnEditingStyle}" CanUserResize="False"/>
                                                            <DataGridTextColumn Binding="{Binding NapeHelpInfoMessage,Mode=TwoWay}" Header="内容" ElementStyle="{StaticResource MaterialDesignDataGridTextColumnStyle}" EditingElementStyle="{StaticResource MaterialDesignDataGridTextColumnEditingStyle}" CanUserResize="False"/>
                                                        </DataGrid.Columns>
                                                    </DataGrid>
                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="400,145,0,0"><Run Text="项的帮助:"/></TextBlock>

                                                    <TextBox Text="{Binding Editer.NapeHelpInfoMessage}" Height="22" FontSize="12" Width="175" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="465,145,0,0"/>
                                                    <Button Command="{Binding Editer.AddNapeHelpInfoMessageCommand}" CommandParameter="{Binding ElementName=napeHelpInfoMessages}" Width="20" Height="20" Margin="0,145,50,0" VerticalAlignment="Top" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="添加" BorderBrush="#FF3AB78A" Background="#FF3AB78A">
                                                        <materialDesign:PackIcon Kind="Plus" />
                                                    </Button>
                                                    <Button  Command="{Binding Editer.DeleteNapeHelpInfoMessageCommand}" CommandParameter="{Binding ElementName=napeHelpInfoMessages}" Width="20" Height="20" Margin="0,145,10,0" VerticalAlignment="Top" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="删除" Background="#FFB73A3A" BorderBrush="#FFB73A3A">
                                                        <materialDesign:PackIcon Kind="ElectricSwitchClosed" />
                                                    </Button>
                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="645,145,0,0"><Run Text="项:"/></TextBlock>
                                                    <ComboBox ItemsSource="{Binding Editer.NapeNums}" SelectedItem="{Binding Editer.NapeSelectNum}" Margin="668,145,77,0" VerticalAlignment="Top" Height="22" FontSize="12" ></ComboBox>
                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="400,10,0,0"><Run Text="卡片需求类型:"/></TextBlock>
                                                    <ComboBox SelectedIndex="{Binding Editer.NeedCardSelectIndex}" Margin="493,10,160,0" VerticalAlignment="Top" Height="22" FontSize="12" >
                                                        <ComboBoxItem>对话主体</ComboBoxItem>
                                                        <ComboBoxItem>玩家对话</ComboBoxItem>
                                                        <ComboBoxItem>NPC对话</ComboBoxItem>
                                                        <ComboBoxItem>条件</ComboBoxItem>
                                                        <ComboBoxItem>事件</ComboBoxItem>
                                                        <ComboBoxItem>目标</ComboBoxItem>
                                                        <ComboBoxItem>任务笔记</ComboBoxItem>
                                                        <ComboBoxItem>物品</ComboBoxItem>
                                                    </ComboBox>
                                                </Grid>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </DataTrigger>

                                <DataTrigger Binding="{Binding Editer.Type}" Value="Events_ChirldClass">
                                    <Setter Property="Control.Template" TargetName="items">
                                        <Setter.Value>
                                            <ControlTemplate>
                                                <Grid x:Name="ChirldClass" TextBlock.FontSize="14" TextBlock.FontWeight="Bold" TextBlock.Foreground="White">

                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="10,10,0,0">命令名称:</TextBlock>
                                                    <TextBox Text="{Binding Editer.ChirdCmdName}" Height="22" FontSize="12" Width="634" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="90,10,0,0"></TextBox>

                                                    <Button Command="{Binding Editer.SaveThisCommand}" CommandParameter="{Binding ElementName=ChirldClass}" Width="60" Height="25" Margin="0 5 11 0" HorizontalAlignment="Right" VerticalAlignment="Top" FontSize="12">保存</Button>
                                                    <DataGrid x:Name="data" ItemsSource="{Binding Editer.ChirdCmdHelpInfoMessages,Mode=TwoWay}" SelectionMode="Extended" CanUserAddRows="False" AutoGenerateColumns="False" HeadersVisibility="All" Margin="10,35,10,35">
                                                        <DataGrid.Columns>
                                                            <DataGridTextColumn Binding="{Binding ChirdCmdHelpInfo,Mode=TwoWay}" Header="内容" ElementStyle="{StaticResource MaterialDesignDataGridTextColumnStyle}" EditingElementStyle="{StaticResource MaterialDesignDataGridTextColumnEditingStyle}" CanUserResize="False"></DataGridTextColumn>
                                                        </DataGrid.Columns>
                                                    </DataGrid>
                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="10,145,0,0">命令帮助:</TextBlock>
                                                    <TextBox Text="{Binding Editer.ChirdCmdHelpInfoMessage}" Height="22" FontSize="12" Width="645" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="90,145,0,0"></TextBox>
                                                    <Button Command="{Binding Editer.AddChirdCmdHelpInfoMessageCommand}" CommandParameter="{Binding ElementName=data}" Width="20" Height="20" Margin="0,145,35,0" VerticalAlignment="Top" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="添加" BorderBrush="#FF3AB78A" Background="#FF3AB78A">
                                                        <materialDesign:PackIcon Kind="Plus" />
                                                    </Button>
                                                    <Button Command="{Binding Editer.DeleteChirdCmdHelpInfoMessageCommand}" CommandParameter="{Binding ElementName=data}" Width="20" Height="20" Margin="0,145,10,0" VerticalAlignment="Top" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="删除" Background="#FFB73A3A" BorderBrush="#FFB73A3A">
                                                        <materialDesign:PackIcon Kind="ElectricSwitchClosed" />
                                                    </Button>
                                                </Grid>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </DataTrigger>

                                <DataTrigger Binding="{Binding Editer.Type}" Value="Objectives_MainClass">
                                    <Setter Property="Control.Template" TargetName="items">
                                        <Setter.Value>
                                            <ControlTemplate>
                                                <Grid x:Name="MainClass" TextBlock.FontSize="14" TextBlock.FontWeight="Bold" TextBlock.Foreground="White">

                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="10,10,0,0">命令名称:</TextBlock>
                                                    <TextBox Text="{Binding Editer.CmdName}" Height="22" FontSize="12" Width="634" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="90,10,0,0"></TextBox>
                                                    <Button Command="{Binding Editer.SaveThisCommand}" CommandParameter="{Binding ElementName=MainClass}" Width="60" Height="25" Margin="0 5 11 0" HorizontalAlignment="Right" VerticalAlignment="Top" FontSize="12">保存</Button>
                                                    <DataGrid x:Name="data" ItemsSource="{Binding Editer.HelpInfoMessages,Mode=TwoWay}" SelectionMode="Extended" CanUserAddRows="False" AutoGenerateColumns="False" HeadersVisibility="All" Margin="10,35,10,35">
                                                        <DataGrid.Columns>
                                                            <DataGridTextColumn Header="内容" Binding="{Binding HelpInfo,Mode=TwoWay}" ElementStyle="{StaticResource MaterialDesignDataGridTextColumnStyle}" EditingElementStyle="{StaticResource MaterialDesignDataGridTextColumnEditingStyle}" CanUserResize="False"></DataGridTextColumn>
                                                        </DataGrid.Columns>
                                                    </DataGrid>
                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="10,145,0,0">命令帮助:</TextBlock>
                                                    <TextBox Text="{Binding Editer.HelpInfoMessage}" Height="22" FontSize="12" Width="645" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="90,145,0,0"></TextBox>
                                                    <Button Command="{Binding Editer.AddHelpInfoMessageCommand}" CommandParameter="{Binding ElementName=data}" Width="20" Height="20" Margin="0,145,35,0" VerticalAlignment="Top" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="添加" BorderBrush="#FF3AB78A" Background="#FF3AB78A">
                                                        <materialDesign:PackIcon Kind="Plus" />
                                                    </Button>
                                                    <Button Command="{Binding Editer.DeleteHelpInfoMessageCommand}" CommandParameter="{Binding ElementName=data}" Width="20" Height="20" Margin="0,145,10,0" VerticalAlignment="Top" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="删除" Background="#FFB73A3A" BorderBrush="#FFB73A3A">
                                                        <materialDesign:PackIcon Kind="ElectricSwitchClosed" />
                                                    </Button>
                                                </Grid>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </DataTrigger>

                                <DataTrigger Binding="{Binding Editer.Type}" Value="Objectives_ParameterFirst">
                                    <Setter Property="Control.Template" TargetName="items">
                                        <Setter.Value>
                                            <ControlTemplate>
                                                <Grid x:Name="ParameterFirst" TextBlock.FontSize="14" TextBlock.FontWeight="Bold" TextBlock.Foreground="White">
                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="10,10,0,0">参数分割符:</TextBlock>
                                                    <TextBox Text="{Binding Editer.ParameterSpiltChar}" Height="22" FontSize="12" Width="30" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="90,10,0,0"></TextBox>
                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="125,10,0,0">参数步长:</TextBlock>

                                                    <TextBox x:Name="ParameterSpiltStep_TBox" Text="{Binding Editer.ParameterSpiltNum,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Height="22" FontSize="12" Width="30" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="190,10,0,0">
                                                        <binding:Interaction.Triggers>
                                                            <binding:EventTrigger EventName="TextChanged">
                                                                <binding:InvokeCommandAction Command="{Binding Editer.ParameterSpiltStepChangedCommand}" CommandParameter="{Binding ElementName=ParameterSpiltStep_TBox}">
                                                                </binding:InvokeCommandAction>
                                                            </binding:EventTrigger>
                                                        </binding:Interaction.Triggers>
                                                    </TextBox>
                                                    <Button Command="{Binding Editer.SaveThisCommand}" Width="60" Height="25" Margin="0 5 11 0" HorizontalAlignment="Right" VerticalAlignment="Top" FontSize="12">保存</Button>
                                                    <DataGrid x:Name="helpdata" ItemsSource="{Binding Editer.ParameterHelpInfoMessages,Mode=TwoWay}" SelectionMode="Extended" CanUserAddRows="False" AutoGenerateColumns="False" HeadersVisibility="All" Margin="10,35,420,35">
                                                        <DataGrid.Columns>
                                                            <DataGridTextColumn Binding="{Binding ParameterHelpInfo,Mode=TwoWay}" Header="内容" ElementStyle="{StaticResource MaterialDesignDataGridTextColumnStyle}" EditingElementStyle="{StaticResource MaterialDesignDataGridTextColumnEditingStyle}" CanUserResize="False"></DataGridTextColumn>
                                                        </DataGrid.Columns>
                                                    </DataGrid>
                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="10,145,0,0">参数帮助:</TextBlock>
                                                    <TextBox Text="{Binding Editer.ParameterHelpInfoMessage}" Height="22" FontSize="12" Width="216" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="90,145,0,0"></TextBox>
                                                    <Button Command="{Binding Editer.AddParameterHelpInfoCommand}" CommandParameter="{Binding ElementName=helpdata}" Width="20" Height="20" Margin="0,145,459,0" VerticalAlignment="Top" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="添加" BorderBrush="#FF3AB78A" Background="#FF3AB78A">
                                                        <materialDesign:PackIcon Kind="Plus" />
                                                    </Button>
                                                    <Button Command="{Binding Editer.DeleteParameterHelpInfoCommand}" CommandParameter="{Binding ElementName=helpdata}" Width="20" Height="20" Margin="0,145,420,0" VerticalAlignment="Top" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="删除" Background="#FFB73A3A" BorderBrush="#FFB73A3A">
                                                        <materialDesign:PackIcon Kind="ElectricSwitchClosed" />
                                                    </Button>
                                                    <DataGrid x:Name="napedata" ItemsSource="{Binding Editer.NapeHelpInfoMessages,Mode=TwoWay}" SelectionMode="Extended" CanUserAddRows="False" AutoGenerateColumns="False" HeadersVisibility="All" Margin="400,35,10,35">
                                                        <DataGrid.Columns>
                                                            <DataGridTextColumn Binding="{Binding NapeHelpInfoMessageNum,Mode=TwoWay}" Header="项" ElementStyle="{StaticResource MaterialDesignDataGridTextColumnStyle}" EditingElementStyle="{StaticResource MaterialDesignDataGridTextColumnEditingStyle}" CanUserResize="False"/>
                                                            <DataGridTextColumn Binding="{Binding NapeHelpInfoMessageSave,Mode=TwoWay}" Header="内容" ElementStyle="{StaticResource MaterialDesignDataGridTextColumnStyle}" EditingElementStyle="{StaticResource MaterialDesignDataGridTextColumnEditingStyle}" CanUserResize="False"/>
                                                        </DataGrid.Columns>
                                                    </DataGrid>
                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="400,145,0,0"><Run Text="项的帮助:"/></TextBlock>

                                                    <TextBox Text="{Binding Editer.NapeHelpInfoMessage}" Height="22" FontSize="12" Width="175" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="465,145,0,0"/>
                                                    <Button Command="{Binding Editer.AddNapeHelpInfoMessageCommand}" CommandParameter="{Binding ElementName=napedata}" Width="20" Height="20" Margin="0,145,50,0" VerticalAlignment="Top" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="添加" BorderBrush="#FF3AB78A" Background="#FF3AB78A">
                                                        <materialDesign:PackIcon Kind="Plus" />
                                                    </Button>
                                                    <Button Command="{Binding Editer.DeleteNapeHelpInfoMessageCommand}" CommandParameter="{Binding ElementName=napedata}" Width="20" Height="20" Margin="0,145,10,0" VerticalAlignment="Top" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="删除" Background="#FFB73A3A" BorderBrush="#FFB73A3A">
                                                        <materialDesign:PackIcon Kind="ElectricSwitchClosed" />
                                                    </Button>
                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="645,145,0,0"><Run Text="项:"/></TextBlock>
                                                    <ComboBox ItemsSource="{Binding Editer.NapeNums}" SelectedItem="{Binding Editer.NapeNumsSelectItem}" Margin="668,145,77,0" VerticalAlignment="Top" Height="22" FontSize="12" ></ComboBox>
                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="225,10,0,0"><Run Text="卡片需求类型:"/></TextBlock>
                                                    <ComboBox SelectedIndex="{Binding Editer.NapeNumsSelectNow}" Margin="318,10,422,0" VerticalAlignment="Top" Height="22" FontSize="12" >
                                                        <ComboBoxItem>对话主体</ComboBoxItem>
                                                        <ComboBoxItem>玩家对话</ComboBoxItem>
                                                        <ComboBoxItem>NPC对话</ComboBoxItem>
                                                        <ComboBoxItem>条件</ComboBoxItem>
                                                        <ComboBoxItem>事件</ComboBoxItem>
                                                        <ComboBoxItem>目标</ComboBoxItem>
                                                        <ComboBoxItem>任务笔记</ComboBoxItem>
                                                        <ComboBoxItem>物品</ComboBoxItem>
                                                    </ComboBox>
                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="400,9,0,0"><Run Text="固有形式:"/></TextBlock>
                                                    <ComboBox x:Name="parameternapeNeedType" ItemsSource="{Binding Editer.ParameterNapeNeedTypes}" SelectedItem="{Binding Editer.ParameterNapeNeedTypeSelectItem}" Margin="465,8,211,0" VerticalAlignment="Top" Height="22" FontSize="12" />
                                                    <Button Command="{Binding Editer.AddParameterNapeNeedTypeCommand}" CommandParameter="{Binding ElementName=parameternapeNeedType}" Width="20" Height="20" Margin="0,8,74,0" VerticalAlignment="Top" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="添加" BorderBrush="#FF3AB78A" Background="#FF3AB78A">
                                                        <materialDesign:PackIcon Kind="Plus" />
                                                    </Button>
                                                    <Button Command="{Binding Editer.DeleteParameterNapeNeedTypeCommand}" CommandParameter="{Binding ElementName=parameternapeNeedType}" Width="20" Height="20" Margin="0,10,185,0" VerticalAlignment="Top" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="删除" Background="#FFB73A3A" BorderBrush="#FFB73A3A">
                                                        <materialDesign:PackIcon Kind="ElectricSwitchClosed" />
                                                    </Button>
                                                    <TextBox Text="{Binding Editer.ParameterNapeNeedType}" Height="22" FontSize="12" Width="83" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="621,9,0,0"/>
                                                </Grid>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </DataTrigger>

                                <DataTrigger Binding="{Binding Editer.Type}" Value="Objectives_Parameter">
                                    <Setter Property="Control.Template" TargetName="items">
                                        <Setter.Value>
                                            <ControlTemplate>
                                                <Grid x:Name="Parameter" TextBlock.FontSize="14" TextBlock.FontWeight="Bold" TextBlock.Foreground="White">

                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="10,10,0,0">参数分割符:</TextBlock>
                                                    <TextBox Text="{Binding Editer.ParameterSpiltChar}" Height="22" FontSize="12" Width="85" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="90,10,0,0"></TextBox>
                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="180,10,0,0">参数步长:</TextBlock>
                                                    <TextBox x:Name="ParameterSpiltStep_TBox" Text="{Binding Editer.ParameterSpiltStep,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" Height="22" FontSize="12" Width="135" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="245,10,0,0">
                                                        <binding:Interaction.Triggers>
                                                            <binding:EventTrigger EventName="TextChanged">
                                                                <binding:InvokeCommandAction Command="{Binding Editer.ParameterSpiltStepChangedCommand}" CommandParameter="{Binding ElementName=ParameterSpiltStep_TBox}">
                                                                </binding:InvokeCommandAction>
                                                            </binding:EventTrigger>
                                                        </binding:Interaction.Triggers>
                                                    </TextBox>
                                                    <Button Command="{Binding Editer.SaveThisCommand}" CommandParameter="{Binding ElementName=Parameter}" Width="60" Height="25" Margin="0 5 11 0" HorizontalAlignment="Right" VerticalAlignment="Top" FontSize="12">保存</Button>
                                                    <DataGrid x:Name="help_data" ItemsSource="{Binding Editer.ParameterHelpInfoMessages,Mode=TwoWay}" SelectionMode="Extended" CanUserAddRows="False" AutoGenerateColumns="False" HeadersVisibility="All" Margin="10,35,420,35">
                                                        <DataGrid.Columns>
                                                            <DataGridTextColumn Binding="{Binding ParameterHelpInfo,Mode=TwoWay}" Header="内容" ElementStyle="{StaticResource MaterialDesignDataGridTextColumnStyle}" EditingElementStyle="{StaticResource MaterialDesignDataGridTextColumnEditingStyle}" CanUserResize="False"></DataGridTextColumn>
                                                        </DataGrid.Columns>
                                                    </DataGrid>
                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="10,145,0,0">参数帮助:</TextBlock>
                                                    <TextBox Text="{Binding Editer.ParameterHelpInfoMessage}" Height="22" FontSize="12" Width="216" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="90,145,0,0"></TextBox>
                                                    <Button Command="{Binding Editer.AddParameterHelpInfoMessageCommand}" CommandParameter="{Binding ElementName=help_data}" Width="20" Height="20" Margin="0,145,459,0" VerticalAlignment="Top" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="添加" BorderBrush="#FF3AB78A" Background="#FF3AB78A">
                                                        <materialDesign:PackIcon Kind="Plus" />
                                                    </Button>
                                                    <Button Command="{Binding Editer.DeleteParameterHelpInfoMessageCommand}" CommandParameter="{Binding ElementName=help_data}" Width="20" Height="20" Margin="0,145,420,0" VerticalAlignment="Top" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="删除" Background="#FFB73A3A" BorderBrush="#FFB73A3A">
                                                        <materialDesign:PackIcon Kind="ElectricSwitchClosed" />
                                                    </Button>
                                                    <DataGrid x:Name="napeHelpInfoMessages" ItemsSource="{Binding Editer.NapeHelpInfoMessages,Mode=TwoWay}" SelectionMode="Extended" CanUserAddRows="False" AutoGenerateColumns="False" HeadersVisibility="All" Margin="400,35,10,35">
                                                        <DataGrid.Columns>
                                                            <DataGridTextColumn Binding="{Binding NapeHelpInfoMessageNum,Mode=TwoWay}" Header="项" ElementStyle="{StaticResource MaterialDesignDataGridTextColumnStyle}" EditingElementStyle="{StaticResource MaterialDesignDataGridTextColumnEditingStyle}" CanUserResize="False"/>
                                                            <DataGridTextColumn Binding="{Binding NapeHelpInfoMessage,Mode=TwoWay}" Header="内容" ElementStyle="{StaticResource MaterialDesignDataGridTextColumnStyle}" EditingElementStyle="{StaticResource MaterialDesignDataGridTextColumnEditingStyle}" CanUserResize="False"/>
                                                        </DataGrid.Columns>
                                                    </DataGrid>
                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="400,145,0,0"><Run Text="项的帮助:"/></TextBlock>

                                                    <TextBox Text="{Binding Editer.NapeHelpInfoMessage}" Height="22" FontSize="12" Width="175" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="465,145,0,0"/>
                                                    <Button Command="{Binding Editer.AddNapeHelpInfoMessageCommand}" CommandParameter="{Binding ElementName=napeHelpInfoMessages}" Width="20" Height="20" Margin="0,145,50,0" VerticalAlignment="Top" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="添加" BorderBrush="#FF3AB78A" Background="#FF3AB78A">
                                                        <materialDesign:PackIcon Kind="Plus" />
                                                    </Button>
                                                    <Button  Command="{Binding Editer.DeleteNapeHelpInfoMessageCommand}" CommandParameter="{Binding ElementName=napeHelpInfoMessages}" Width="20" Height="20" Margin="0,145,10,0" VerticalAlignment="Top" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="删除" Background="#FFB73A3A" BorderBrush="#FFB73A3A">
                                                        <materialDesign:PackIcon Kind="ElectricSwitchClosed" />
                                                    </Button>
                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="645,145,0,0"><Run Text="项:"/></TextBlock>
                                                    <ComboBox ItemsSource="{Binding Editer.NapeNums}" SelectedItem="{Binding Editer.NapeSelectNum}" Margin="668,145,77,0" VerticalAlignment="Top" Height="22" FontSize="12" ></ComboBox>
                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="400,10,0,0"><Run Text="卡片需求类型:"/></TextBlock>
                                                    <ComboBox SelectedIndex="{Binding Editer.NeedCardSelectIndex}" Margin="493,10,160,0" VerticalAlignment="Top" Height="22" FontSize="12" >
                                                        <ComboBoxItem>对话主体</ComboBoxItem>
                                                        <ComboBoxItem>玩家对话</ComboBoxItem>
                                                        <ComboBoxItem>NPC对话</ComboBoxItem>
                                                        <ComboBoxItem>条件</ComboBoxItem>
                                                        <ComboBoxItem>事件</ComboBoxItem>
                                                        <ComboBoxItem>目标</ComboBoxItem>
                                                        <ComboBoxItem>任务笔记</ComboBoxItem>
                                                        <ComboBoxItem>物品</ComboBoxItem>
                                                    </ComboBox>
                                                </Grid>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </DataTrigger>

                                <DataTrigger Binding="{Binding Editer.Type}" Value="Objectives_ChirldClass">
                                    <Setter Property="Control.Template" TargetName="items">
                                        <Setter.Value>
                                            <ControlTemplate>
                                                <Grid x:Name="ChirldClass" TextBlock.FontSize="14" TextBlock.FontWeight="Bold" TextBlock.Foreground="White">

                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="10,10,0,0">命令名称:</TextBlock>
                                                    <TextBox Text="{Binding Editer.ChirdCmdName}" Height="22" FontSize="12" Width="634" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="90,10,0,0"></TextBox>

                                                    <Button Command="{Binding Editer.SaveThisCommand}" CommandParameter="{Binding ElementName=ChirldClass}" Width="60" Height="25" Margin="0 5 11 0" HorizontalAlignment="Right" VerticalAlignment="Top" FontSize="12">保存</Button>
                                                    <DataGrid x:Name="data" ItemsSource="{Binding Editer.ChirdCmdHelpInfoMessages,Mode=TwoWay}" SelectionMode="Extended" CanUserAddRows="False" AutoGenerateColumns="False" HeadersVisibility="All" Margin="10,35,10,35">
                                                        <DataGrid.Columns>
                                                            <DataGridTextColumn Binding="{Binding ChirdCmdHelpInfo,Mode=TwoWay}" Header="内容" ElementStyle="{StaticResource MaterialDesignDataGridTextColumnStyle}" EditingElementStyle="{StaticResource MaterialDesignDataGridTextColumnEditingStyle}" CanUserResize="False"></DataGridTextColumn>
                                                        </DataGrid.Columns>
                                                    </DataGrid>
                                                    <TextBlock Height="20" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="10,145,0,0">命令帮助:</TextBlock>
                                                    <TextBox Text="{Binding Editer.ChirdCmdHelpInfoMessage}" Height="22" FontSize="12" Width="645" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="90,145,0,0"></TextBox>
                                                    <Button Command="{Binding Editer.AddChirdCmdHelpInfoMessageCommand}" CommandParameter="{Binding ElementName=data}" Width="20" Height="20" Margin="0,145,35,0" VerticalAlignment="Top" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="添加" BorderBrush="#FF3AB78A" Background="#FF3AB78A">
                                                        <materialDesign:PackIcon Kind="Plus" />
                                                    </Button>
                                                    <Button Command="{Binding Editer.DeleteChirdCmdHelpInfoMessageCommand}" CommandParameter="{Binding ElementName=data}" Width="20" Height="20" Margin="0,145,10,0" VerticalAlignment="Top" HorizontalAlignment="Right" Style="{StaticResource MaterialDesignFloatingActionMiniDarkButton}" ToolTip="删除" Background="#FFB73A3A" BorderBrush="#FFB73A3A">
                                                        <materialDesign:PackIcon Kind="ElectricSwitchClosed" />
                                                    </Button>
                                                </Grid>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </DataTrigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </ItemsControl.Template>
                </ItemsControl>
                
            </Grid>
        </Grid>
    </Grid>
</Window>
